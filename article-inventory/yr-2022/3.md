# 為甚麼這個網站沒有留言區？

## （非專業都能理解）從網頁安全角度去設計網頁功能

- firstPublished: 1648283956239
- type: 教學
- tags: tech, infosec
- series: 千里之行始於足下

---

# 前言

常見的網誌都有留言區功能，讓讀者可以就文章的內容作出評論。不過我所建立的網誌，並沒有留言區功能，現在沒有，在短期內也不會有。原因有很多，包括無人留言、相熟的讀者朋友本身有找到我的方法、節省資料儲存空間等等，不過那些問題本身都是不太重要的因素。最重要的因素，是網站安全。由於這個網站是我由頭創建，換言之這個網站的系統安全要由我一手包辦，制定防御方針和實行防護都是我必須要處理的問題。如果使用 Medium.com 或者 Blogger.com 等平台，平台供應商會為用家處理好這類問題，而因為那些平台供應商通常都有一隊專業團隊或者購買了企業級防護服務，所以它們理論上有足夠的能力抵御攻擊； 相反，我要從頭思考所有可能的攻擊面向，思考網站那一部份有漏洞，萬一被攻擊最壞情況會發生甚麼事。

# 用家的惡意輸入

最重要而且最難克服的是，如何防御。大家都知道網頁是由程式所組成，網頁安全其中一個最難的部份莫過於如何寫出一段有效的防御程式去識別惡意輸入，用專業的用語，就是如何做 Sanitization。

為何要防範用家的輸入？是因為其中一類最常見的網站攻擊都是源於網站設計者沒有仔細思考過用戶會輸入甚麼，假如用戶輸入了一些惡言代碼，因為代碼本質上都是文字，網頁會將惡意代碼當成普通文字去讀取，當後台 (Back-end) 的程式去處理時，惡意代碼會無意地被執行，最終導致程式走向設計者不希望或者沒有設想過的方向。

因為我沒有信心可以從海量文字輸入中，識別出千變萬化的惡意代碼，所以我就採用焦土策略，直接棄用文字輸入框，畢竟沒有地方輸入就無法植入惡意程式。

# 唯讀資料

當然，如果對網頁製作有一定認識的讀者，都會意識到文字輸入框只是前端網頁 (Front-end) 的部份，只要前端網頁有向 Back-end 發送訊息，不論 Front-end 有沒有文字輸入框，攻擊者都有機會可以劫持那段由 Front-end 發出的訊息，通改惡意修改再轉發到 Back-end，完成一次攻擊。

我都有思考過這方面的問題，所以我將網站拆分成兩個面向，一個是面向公眾，一個是面向我自己。這個網站在大家的角度，似乎只是我用來擺放文章和自我簡介。但這只是因為各位沒有辦法登入，一旦登入後就會發現這個網站的功能其實更加豐富，我就用來當作自己的個人財務的儀表板，我將不同帳戶的財產資料，例如銀行帳戶，股票帳戶等用不同的方法收集過後，一次過呈現在這個網站之中。這部份的功能需要登入才能看到，但即使如此，這些私人功能和文章功能本身都有一個共同而且重要的特點，就是唯讀。

這個網站的 Front-end 基本上只能夠讀取 Back-end 資料，不能主動定義和修改 Back-end 資料，換句話說，在攻擊者可以操控的 Front-end，以及 Front-end 與 Back-end 之間的部份，即使如何修改訊息都好，最終 Back-end 只會接受「讀取」的行為，然後按情況選擇回傳一些已經固定好的內容。所有可以顯示在 Front-end 的內容都是我設想中容許的範圍內，攻擊者的權限，假設在沒有登入的情況之下，被限制於讀取資料，而且是我本身願意公開的資料，如果想取得我私人資料就必需破解登入。

# 向攻擊者挑釁

去到這一步，大家都可以幻想到，登入功能其實就是整個網站最大的漏洞。正如我在第一節提到，任何文字輸入框都可以被植入惡意代碼，登入功能基本上就必然暗示着會有文字輸入框，像平常到其他網站般輸入帳戶密碼。那麼我到底要如何處理我在上文提及的用家惡意輸入問題呢？答案是交給專家去處理。

我的登入功能，甚至網站大部份的基礎建設都是用 AWS 的服務，你可能未必知道 AWS 是甚麼，簡單理解 AWS 就是 Amazon 的子公司，Amazon 整個網站都是用 AWS 去建立，AWS 服務對象除了母公司 Amazon 之外，還包括企業和個人，Netflix 甚至美帝國防部。當今科技其中一個寵兒是雲端技術，AWS 就是當中全球市佔最高的一間公司，沒有之一。只要運用得當就可以將成本壓得非常低。

所以為甚麼我會如此囂張在登入頁面寫下一段帶有少許挑釁性質的宣言，除了因為我發自內心支持網絡攻防和技術革新之外，我更想誘導攻擊者集中攻擊登入功能，因為登入功能由 AWS 所控制就已經是最高級別的防御，誘導敵人去攻擊我防守最嚴密的地方，以此消磨對方的耐性和時間都是一種策略（雖然如果攻擊者夠資深的話，很快就會察覺到）。

# 結語

資訊安全是一件非常有趣的領域，攻擊方和防守方互相猜度和鬥智鬥力，以層出不窮的方法設法擊敗對方，不論在技術層面還是心理層面的角力，精彩程度不下於犯罪劇和推理劇，最重要還是親身參與實戰，在真實世界和戰場上一較高下，沒有提示，沒有新手教學，只有無盡的攻防。